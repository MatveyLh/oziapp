(this.webpackJsonpozitag=this.webpackJsonpozitag||[]).push([[0],{109:function(e,t,a){e.exports=a(141)},114:function(e,t,a){},132:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),i=(a(114),a(57)),l=a(4),s=a(62),m=a(63),u=a(105),d=a(103),p=a(43),f=a(79),b=a.n(f),h="https://tager.dev.ozitag.com",E=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,[{key:"post",value:function(e,t){return b.a.post("https://cors-anywhere.herokuapp.com/".concat(h,"/").concat(e),t,{headers:{"Access-Control-Allow-Origin":"*",crossdomain:!0,Authorization:localStorage.getItem("token")}})}},{key:"get",value:function(e){return b.a.get("https://cors-anywhere.herokuapp.com/".concat(h,"/").concat(e),{headers:{Authorization:localStorage.getItem("token")}})}},{key:"put",value:function(e,t){return b.a.put("https://cors-anywhere.herokuapp.com/".concat(h,"/").concat(e),t,{headers:{Authorization:localStorage.getItem("token")}})}}]),e}(),g=(a(132),a(23)),v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isAuth:!1,isError:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.state.isAuth||localStorage.getItem("token")?r.a.createElement(l.a,{to:"/profile"}):r.a.createElement(g.d,{initialValues:{email:"",password:""},validationSchema:p.a().shape({email:p.b().email("Email is invalid").required("Email is required"),password:p.b().min(4,"Password must be at least 4 characters").required("Password is required")}),onSubmit:function(t){e.setState({isError:!1});var a=new E,n={email:t.email,password:t.password,clientId:1};a.post("api/auth/user",n).then((function(e){localStorage.setItem("token",e.data.data.tokenType+" "+e.data.data.accessToken)})).then((function(){e.setState({isAuth:!0})})).catch((function(){e.setState({isError:!0})}))},render:function(t){var a=t.errors,n=t.touched;return r.a.createElement(g.c,{className:"form-login"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(g.b,{name:"email",type:"text",className:"form-control"+(a.email&&n.email?" is-invalid":"")}),r.a.createElement(g.a,{name:"email",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(g.b,{name:"password",type:"password",className:"form-control"+(a.password&&n.password?" is-invalid":"")}),r.a.createElement(g.a,{name:"password",component:"div",className:"invalid-feedback"})),e.state.isError?r.a.createElement("p",{className:"error-message"},"Data is invalid!"):"",r.a.createElement("div",{className:"form-group form-group_button"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login")))}})}}]),a}(r.a.Component),w=a(61),k=(a(138),a(165)),N=a(167),S=a(143),y=a(166),O=function(){var e=Object(n.useState)({email:"",name:""}),t=Object(w.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!0),i=Object(w.a)(c,2),s=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(w.a)(u,2),f=d[0],b=d[1],h=Object(n.useState)(!1),v=Object(w.a)(h,2),O=v[0],j=v[1];Object(n.useEffect)((function(){(new E).get("/api/tager/user/profile").then((function(e){o(e.data.data)}))}),[O]);return s?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-wrapper"},r.a.createElement("p",null,"Email: ",a.email),r.a.createElement("p",null,"Name: ",a.name)),r.a.createElement("div",{className:"profile-buttons"},r.a.createElement("button",{className:"profile-buttons_btn",onClick:function(){b(!0)}},"Change name"),r.a.createElement("button",{onClick:function(){(new E).post("api/tager/user/profile/logout").then((function(){localStorage.removeItem("token"),m(!1)}))},className:"profile-buttons_btn exit-btn"},"Exit")),r.a.createElement(N.a,{onClose:function(){b(!1)},"aria-labelledby":"customized-dialog-title",open:f},r.a.createElement(k.a,{id:"customized-dialog-title"},"Modal title"),r.a.createElement(y.a,{className:"dialog-content",dividers:!0},r.a.createElement(S.a,null,r.a.createElement(g.d,{initialValues:{text:""},validationSchema:p.a().shape({newName:p.b().min(4,"Username must be at least 4 characters").required("Field is required")}),onSubmit:function(e){j(!1);var t=new E,n={name:e.newName,clientId:1,email:a.email};t.put("api/tager/user/profile",n).then((function(e){j(!0),b(!1)}))},render:function(e){var t=e.errors,a=e.touched;return r.a.createElement(g.c,null,r.a.createElement("label",{htmlFor:"newName"},"New name"),r.a.createElement(g.b,{name:"newName",type:"text",className:"form-control"+(t.text&&a.text?" is-invalid":"")}),r.a.createElement(g.a,{name:"newName",component:"div",className:"invalid-feedback"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary changePassword-btn"},"Save"))}}))))):r.a.createElement(l.a,{to:"/oziapp"})},j=a(104),z=function(e){var t=e.component,a=Object(j.a)(e,["component"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/login"})}}))},I=(a(139),function(){return r.a.createElement(i.a,null,r.a.createElement(l.b,{path:"/oziapp",component:function(e){return r.a.createElement(v,e)}}),r.a.createElement(z,{component:function(){return r.a.createElement(O,null)},path:"/profile"}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(140);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.1d077c64.chunk.js.map